# Quick Start Guide - MongoDB Atlas Migration

## âœ… Migration Complete!

Your Vishal Car Wash application is now connected to MongoDB Atlas. Here's everything you need to know to get started.

---

## ğŸš€ Start Your Application (3 Steps)

### 1. Verify Configuration
```bash
npm run test-db
```
**Expected output:** âœ… Connected to MongoDB Atlas with 2 collections

### 2. Check Services Data
Your database already has 5 services:
- Basic Wash ($25.99)
- Deluxe Wash ($49.99)
- Premium Wash ($79.99)
- Interior Detailing ($149.99)
- Full Detailing ($299.99)

### 3. Start Development Server
```bash
npm run dev
```
**Access your app:** http://localhost:3001

---

## ğŸ¯ What Changed?

### Before
```javascript
// Hardcoded connection (INSECURE)
mongoose.connect('mongodb+srv://user:pass@cluster...')
```

### After
```javascript
// Environment variable (SECURE)
mongoose.connect(process.env.MONGODB_URI)
```

**All credentials are now in `.env.local` (gitignored)**

---

## ğŸ“‹ Available Commands

| Command | Description |
|---------|-------------|
| `npm run dev` | Start development server (port 3001) |
| `npm run test-db` | Test MongoDB Atlas connection |
| `npm run seed` | Re-seed services data |
| `npm run build` | Build for production |
| `npm start` | Start production server |

---

## ğŸ” Test Your Application

### 1. View Services
Open: http://localhost:3001/services

Or test API:
```bash
curl http://localhost:3001/api/services
```

### 2. Create Account
Open: http://localhost:3001/auth/signup

Or test API:
```bash
curl -X POST http://localhost:3001/api/auth/signup \
  -H "Content-Type: application/json" \
  -d '{
    "name": "John Doe",
    "email": "john@example.com",
    "password": "securepass123"
  }'
```

### 3. Sign In
Open: http://localhost:3001/auth/signin

### 4. Book a Service
Open: http://localhost:3001/booking

---

## ğŸ—„ï¸ Your MongoDB Atlas Setup

### Database Structure
```
MongoDB Atlas
â””â”€â”€ VishalCarWash (database)
    â”œâ”€â”€ users (collection) - User accounts
    â”œâ”€â”€ services (collection) - Available services âœ… 5 items
    â”œâ”€â”€ bookings (collection) - Service bookings (created on first booking)
    â”œâ”€â”€ accounts (collection) - OAuth accounts (for Google sign-in)
    â””â”€â”€ sessions (collection) - User sessions
```

### Connection Details
- **Host:** cluster0.avgsrgl.mongodb.net
- **Database:** VishalCarWash
- **Status:** âœ… Connected
- **Collections:** 2 active (users, services)

---

## ğŸ“ Important Files

### Environment Configuration
- `.env.local` - Your MongoDB Atlas credentials (DO NOT COMMIT)
- `.gitignore` - Already configured to ignore `.env*.local`

### Database Files
- `/lib/db.js` - Main database connection (Mongoose)
- `/lib/mongodb.js` - NextAuth database connection (Native client)

### Models
- `/models/User.js` - User schema
- `/models/Booking.js` - Booking schema
- `/models/Service.js` - Service schema

### API Routes
- `/app/api/bookings/route.js` - Booking management
- `/app/api/services/route.js` - Service listings
- `/app/api/auth/signup/route.js` - User registration
- `/app/api/auth/[...nextauth]/route.js` - Authentication

---

## âš™ï¸ Configuration Files

### `.env.local` (Created âœ…)
```env
MONGODB_URI=mongodb+srv://...
NEXTAUTH_SECRET=<auto-generated>
NEXTAUTH_URL=http://localhost:3001
NEXTAUTH_DATABASE=VishalCarWash
NODE_ENV=development
```

**Note:** Google OAuth variables need to be configured if you want to enable Google sign-in.

---

## ğŸ” Security Features

âœ… **Implemented:**
- Database credentials in environment variables
- `.env.local` file gitignored
- Auto-generated secure NextAuth secret
- No hardcoded credentials in code

âš ï¸ **For Production:**
- Use different MongoDB Atlas credentials
- Enable IP whitelisting in MongoDB Atlas
- Set up database backups
- Monitor access logs

---

## ğŸ› Common Issues & Solutions

### "Cannot connect to MongoDB"
1. Check your internet connection
2. Verify MongoDB Atlas Network Access (whitelist your IP)
3. Ensure `.env.local` file exists

### "Services not loading"
Run: `npm run seed` to populate services

### "Authentication not working"
1. Check `NEXTAUTH_SECRET` is set
2. Verify `NEXTAUTH_URL` matches your dev server
3. Clear browser cookies and try again

### Need to reset database?
```bash
# Re-seed services
npm run seed
```

---

## ğŸ“Š Database Monitoring

### View Your Data
1. Go to [MongoDB Atlas](https://cloud.mongodb.com)
2. Sign in to your account
3. Click on "Browse Collections"
4. View your VishalCarWash database

### Monitor Performance
- Check connection metrics in MongoDB Atlas dashboard
- Monitor query performance
- Set up alerts for issues

---

## ğŸš¢ Deploy to Production

When you're ready to deploy:

### 1. Set Environment Variables in Hosting Platform

**Vercel:**
```bash
vercel env add MONGODB_URI
vercel env add NEXTAUTH_SECRET
vercel env add NEXTAUTH_URL
```

**Netlify:**
Add in: Site settings â†’ Environment variables

### 2. Update Configuration
- Change `NEXTAUTH_URL` to your production domain
- Use production MongoDB Atlas credentials
- Configure MongoDB Atlas for production IPs

### 3. Build and Deploy
```bash
npm run build
npm start
```

---

## ğŸ“š Additional Documentation

- `MIGRATION_SUMMARY.md` - Complete migration details
- `MONGODB_ATLAS_MIGRATION.md` - Comprehensive guide
- `PROJECT_DOCUMENTATION.md` - Project overview

---

## âœ… Migration Checklist

- âœ… MongoDB Atlas connection configured
- âœ… Environment variables set
- âœ… Database seeded with services
- âœ… NextAuth configured
- âœ… All APIs tested
- âœ… Security implemented
- âœ… Documentation created

---

## ğŸ‰ You're All Set!

Your application is now running on MongoDB Atlas. Start your dev server and begin building!

```bash
npm run dev
```

**Questions?** Check the troubleshooting section or review the migration documentation.

---

**Last Updated:** December 17, 2025  
**Status:** âœ… Ready for development

